<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Account | Alawusa Heritage</title>
  <link rel="shortcut icon" href="Alawusa heritage icon - Icon.png" type="img">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script type="module" src="homepage.js"></script>
  <style>
    /* -------------------------
       Reset & base
       ------------------------- */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html,body { height: 100%; }
    body {
      font-family: 'Poppins', sans-serif;
      background: #f5f5f5;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      color: #222;
    }
    a { color: inherit; text-decoration: none; }
  

    /* -------------------------
       Header
       ------------------------- */
    header {
  position: sticky;   /* Makes it stick */
  top: 0;             /* Sticks to the very top */
  z-index: 1000;      /* Ensures it stays above other content */
  background: #fff;   /* Keeps background solid so content doesn’t bleed through */
  padding: 10px 16px;
  display: flex;
  align-items: center;
  gap: 10px;
  border-bottom: 1px solid #eee;
  flex-wrap: nowrap;
}


    /* hamburger (desktop hidden) */
    .menu-toggle {
      display: none;
      font-size: 22px;
      line-height: 1;
      cursor: pointer;
      background: transparent;
      border: none;
      padding: 6px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      flex: 0 0 auto;
      margin-right: 70px;
    }
    .logo img { display: block; width: 100px;}
    .logo .brand { color: #f68b1e; font-weight: 600; font-size: 18px; }

    /* Search (flexible) */
    .search-bar {
      display: flex;
      flex: 0 0 auto;
      min-width: 200px;                 /* <--- critical for responsive shrinking */
      gap: 0;
      margin: 0 10px;
      margin-left: 20%;
    }

    .search-icon {
      display: none;
    }

    @media (max-width: 768px){
      .search-bar {
        margin: 0px;
        margin-left: 0%;
        flex: 1 1 auto;
      }
    }
    .search-bar input {
      flex: 1 1 auto;
      min-width: 400px;                 /* lets input shrink below content width */
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: 6px 0 0 6px;
      outline: none;
      font-size: 14px;
    }
    .search-bar button {
      flex: 0 0 auto;
      padding: 10px 14px;
      border: none;
      background: #4c9949;
      color: #fff;
      border-radius: 0 6px 6px 0;
      cursor: pointer;
      font-weight: 600;
    }

    /* header actions */
    .header-actions {
      display: flex;
      align-items: center;
      gap: 16px;
      flex: 0 0 auto;
    }

    /* user dropdown */
    .user-menu { position: relative; cursor: pointer; }
    .user-menu .greet { font-weight: 500; display:inline-block; padding:6px; }
    .dropdown {
      display: none;
      position: absolute;
      top: calc(100% + 8px);
      right: 0;
      background: #fff;
      border: 1px solid #eee;
      border-radius: 8px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
      min-width: 180px;
      z-index: 1001;
      
    }
    .dropdown li { list-style: none; padding: 10px 12px; cursor: pointer; }
    .dropdown li:hover { background: #cef1cd; color: #4e9648; }
    .user-menu:focus-within .dropdown,
    .user-menu:hover .dropdown { display: block; }

    /* cart */
    .cart-wrapper { position: relative; display:inline-block; }
    .shopping-cart {
      width: 22px; height: 22px; display:block;
      object-fit: contain;
    }
    .cart-count {
      position: absolute;
      top: -6px;
      right: -8px;
      background: red;
      color: #fff;
      font-size: 12px;
      font-weight: 700;
      padding: 3px 6px;
      border-radius: 999px;
      border: 0px solid #fff; /* white ring */
      line-height: 1;
    }

    @media (max-width: 768px) {
      .cart-wrapper {
        margin-left: 70px;
      }
    }

    /* help */
    .help { font-weight: 500; cursor: pointer; padding: 6px; }

    @media (max-width: 768px) {
      .help {
        display: none;
      }
    }

    /* -------------------------
       Dashboard layout
       ------------------------- */
    .dashboard-container { display: flex; flex: 1 1 auto; width: 100%; min-height: calc(100vh - 68px); }
    .sidebar {
      background: #fff;
      width: 250px;
      min-height: 100vh;
      padding: 20px;
      border-right: 1px solid #eee;
      transition: transform 260ms cubic-bezier(.2,.9,.3,1);
    }
    .sidebar h2 { font-size: 18px; color: #3a8034; margin-bottom: 18px; }
    .sidebar ul { list-style: none; }
    .sidebar li {
      padding: 11px 10px; margin-bottom: 8px; border-radius: 6px; cursor: pointer; font-weight: 500;
    }
    .sidebar li:hover, .sidebar li.active { background: #cef1cd; color: #4e9648; }

    .main-content { flex: 1 1 auto; padding: 30px; }
    section { background: #fff; padding: 20px; margin-bottom: 18px; border-radius: 8px; box-shadow: 0 1px 4px rgba(0,0,0,0.06); }

    /* overlay (for mobile menu) */
    .overlay {
      position: fixed;
      inset: 0;
      display: none;
      background: rgba(0,0,0,0.4);
      z-index: 1000;
    }
    .overlay.show { display: block; }

    .mobile-content {
      display: none;
    }

    /* -------------------------
       Mobile responsiveness
       ------------------------- */
    @media (max-width: 768px) {
      header {
        align-items: center;
        gap: 8px;
        padding: 10px;
      }

      .menu-toggle { display: inline-flex; }
      .logo { order: 2; }
      .menu-toggle { order: 1; }

      /* place header actions to the right */
      .header-actions { order: 3; }

      /* make search full-width below header actions */
      .search-bar {
        order: 4;
        width: 100%;
        margin: 8px 0 0 0;
      }

      /* Sidebar behavior on mobile: slide-in from left */
      .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        width: 260px;
        transform: translateX(-100%); /* hidden by default */
        z-index: 1002;
        box-shadow: 4px 0 18px rgba(0,0,0,0.12);
      }
      .sidebar.open {
        transform: translateX(0); /* visible when open */
      }

      /* when sidebar is open we show overlay (controlled by JS) */
      .dashboard-container { flex-direction: column; }
      .mobile-content { padding: 5px; display: none;}
    }

    /* tiny screen tweaks */
    @media (max-width: 768px) {
      .search-bar input { padding: 9px; font-size: 13px; }
      .search-bar button { padding: 9px 10px; font-size: 13px; }
      .logo .brand { font-size: 16px; }
      .user-menu { display: none;}
      .search-bar { display: none;}
      .search-icon { position: absolute; right: 15px; top: 10%; transform: translateY(-50%); color: #888; font-size: 18px; display: block;}
      .desktop-content { display: block;}

    }

    

    .desktop-content { flex: 1 1 auto; padding: 3px; }
    .profile-section h4 { font-size: 20px;}
    .profile-section p1 {border: 1px solid black; padding: 10px 0px 10px 10px; border-radius: 1px; width: 180px;}

    .profile-section{display: block; line-height: 2;}

    .mobile-search-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  z-index: 2000;
  align-items: center;
  justify-content: center;
}
.mobile-search-box {
  background: #fff;
  padding: 15px;
  border-radius: 8px;
  width: 90%;
  display: flex;
  gap: 8px;
  align-items: center;
}
.mobile-search-box input {
  flex: 1;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 6px;
}
.mobile-search-box button {
  padding: 10px 14px;
  background: #4c9949;
  border: none;
  color: #fff;
  border-radius: 6px;
  cursor: pointer;
}
#closeMobileSearch {
  font-size: 22px;
  margin-left: 6px;
  cursor: pointer;
}

/* General profile section styling */
.profile-section {
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  padding: 20px;
  margin: 20px auto;
  max-width: 5000px;
  transition: all 0.3s ease-in-out;
  border: 1px solid #f1f1f1;
}

/* Hover glow */
.profile-section:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 18px rgba(0,0,0,0.12);
}

/* Section title */
.profile-section h4 {
  font-size: 1.2rem;
  font-weight: 600;
  color: green;
  margin-bottom: 15px;
  position: relative;
}

.profile-section h4::after {
  content: "";
  width: 40px;
  height: 3px;
  background: green;
  display: block;
  margin-top: 6px;
  border-radius: 2px;
}

/* Inputs */
.profile-section input,
.profile-section textarea {
  width: 100%;
  padding: 12px 15px;
  border: 1px solid #ddd;
  border-radius: 8px;
  outline: none;
  font-size: 14px;
  margin-bottom: 12px;
  transition: border 0.3s ease;
  font-family: "Poppins", sans-serif;
}

.profile-section input:focus,
.profile-section textarea:focus {
  border: 1px solid green;
  box-shadow: 0 0 0 3px rgba(255,90,0,0.1);
}

/* Save buttons */
.profile-section button {
  background: linear-gradient(135deg, #07d846, #3c9734);
  color: #fff;
  border: none;
  padding: 12px 20px;
  border-radius: 25px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  display: inline-block;
  box-shadow: 0 4px 12px rgba(255,90,0,0.3);
}

.profile-section button:hover {
  background: linear-gradient(135deg, #3c9734, #043f07);
  transform: scale(1.05);
  box-shadow: 0 6px 16px rgba(255,90,0,0.4);
}

/* Current info */
.profile-section p {
  margin-top: 10px;
  font-size: 14px;
  color: #333;
}

.profile-section span {
  font-weight: 600;
  color: #111;
}

.footer {
  margin-top: 100px;
  background: #0f2c0f;
  color: #fff;
  padding: 40px 20px 20px;
  font-size: 14px;
  line-height: 1.8;
}

.footer-container {
  max-width: 1200px;
  margin: 0 auto;
}

.footer-links {
  display: flex;
  flex-wrap: wrap;
  gap: 40px;
  justify-content: space-between;
}

.footer-column h5 {
  font-weight: 600;
  margin-bottom: 15px;
  color: #7ed957;
}

.footer-column ul li {
  margin-bottom: 10px;
  list-style: none;
}

.footer-column ul li a {
  color: #fff;
  transition: color 0.3s;
}

.footer-column ul li a:hover {
  color: #7ed957;
}

.social-links i {
  margin-right: 8px;
}

.footer-copy {
  margin-top: 30px;
  text-align: center;
  border-top: 1px solid #333;
  padding-top: 15px;
  font-size: 13px;
  color: #bbb;
}

/* Responsive footer */
@media (max-width: 768px){
  .footer { margin-top: 250px;}
  .footer-links {
    flex-direction: column;
    gap: 20px;
  }
}


  </style>
</head>
<body>

  <!-- Header -->
  <header>
    <!-- hamburger for mobile -->
    <button class="menu-toggle" id="menuToggle" aria-label="Open menu" aria-expanded="false">☰</button>

    <!-- logo -->
    <div class="logo" role="banner">
      <!-- change to your real logo file -->
      <a href="homepage.html">
        <img src="Alawusa heritage logo.png" alt="Alawusa Heritage logo">
      </a>
    </div>

    <!-- flexible search -->
   <!-- Search bar (desktop) -->
<div class="search-bar" role="search">
  <input id="searchInput" type="search" placeholder="Search for products..." aria-label="Search products">
  <button id="searchBtn" type="button" aria-label="Search">Search</a></button>
</div>

<!-- Search icon (mobile) -->
<div class="search-icon" id="mobileSearchIcon">
  <i class="fa fa-search"></i>
</div>

<!-- Mobile search overlay -->
<div class="mobile-search-overlay" id="mobileSearchOverlay">
  <div class="mobile-search-box">
    <input id="mobileSearchInput" type="search" placeholder="Search for products...">
    <button id="mobileSearchBtn">Search</button>
    <span id="closeMobileSearch">&times;</span>
  </div>
</div>


    <!-- actions (user / cart / help) -->
    <div class="header-actions" role="navigation" aria-label="Top actions">
      <div class="user-menu" tabindex="0">
        <span>Welcome</span> <i class="fa fa-angle-down"></i></span>
        <ul class="dropdown" role="menu" aria-hidden="true">
          <li role="menuitem"> <i class="fas fa-info-circle" aria-hidden="true"></i> <a href="useraboutus.html" style="margin-left: 17px;">About Us</a></li>
          <li role="menuitem"> <i class="fas fa-phone" aria-hidden="true"></i> <a href="usercontact.html" style="margin-left: 15px;">Contact Us</a></li>
          <li role="menuitem"> <i class="fas fa-comments" aria-hidden="true" style="margin-right: 18px;"></i> <a href="usertestimonial.html"> Testimonials</li>
        </ul>
      </div>

      <div class="cart-wrapper" title="Cart">
        <a href="cart.html" aria-label="View cart">
          <!-- fallback is emoji if image missing -->
          <a href="usercart.html"><i class="fas fa-shopping-cart"></i></a>
    <span class="cart-count" id="cartCount">0</span>
        </a>
      </div>

      
    </div>
  </header>

  <!-- overlay for mobile sidebar -->
  <div class="overlay" id="overlay" aria-hidden="true"></div>

  <!-- Dashboard -->
  <div class="dashboard-container">
    <aside class="sidebar" id="sidebar" aria-hidden="false">
      <h2>My Account</h2>
      <ul>
        <a href="homepage.html"><li class="active"><i class="fa-solid fa-user" style="margin-right: 15px;"></i> Profile  </li></a>
        <a href="userproducts.html"><li><i class="fa-solid fa-store" style="margin-right: 15px;"></i> Products </li></a>
        <a href="userorders.html"><li><i class="fa-solid fa-box-open" style="margin-right: 13px;"></i> Orders</li></a>
        <a href="wishlist.html"><li><i class="fa-solid fa-bookmark" style="margin-right: 20px;"></i> Wishlist</li></a>
        <li id="logoutButton"><i class="fa-solid fa-sign-out" style="margin-right: 15px;"></i> Logout</li>
      
      </ul>
    </aside>


<div class="desktop-content"> 
    <main class="main-content" id="mainContent">
      <section class="profile-section">
        <h4>Account Details </h4>
        <p>Name: <span id="userName">Customer</span></p>
      </section>



        <section class="profile-section">
  <h4>Edit Phone Number</h4>
  <input type="text" id="phoneInput" placeholder="Enter phone number">
  <button id="savePhoneBtn">Save</button>
  <p>Current Number: <span id="currentPhone">Not set</span></p>
</section>
      

  
        
      <section class="profile-section">
  <h4>Edit Address</h4>
  <textarea id="addressInput" placeholder="Enter your address"></textarea>
  <button id="saveAddressBtn">Save</button>
  <p>Current Address: <span id="currentAddress">Not set</span></p>
</section>
    </main>
</div>


  </div>

  


  <footer class="footer">
  <div class="footer-container">
    <div class="footer-links">
      <div class="footer-column">
        <h5>Company</h5>
        <ul>
          <li><a href="useraboutus.html">About Us</a></li>
          <li><a href="userourfarm.html">Our Farm</a></li>
          <li><a href="userblogpost.html">Blog</a></li>
          <li><a href="userfaq.html">FAQs</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h5>Explore</h5>
        <ul>
          <li><a href="userrecipes.html">Recipes</a></li>
          <li><a href="usertestimonial.html">Testimonials</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h5>Follow Us</h5>
        <ul class="social-links">
          <li><a href="https://facebook.com" target="_blank"><i class="fab fa-facebook-f"></i> Facebook</a></li>
          <li><a href="https://wa.me/your-number" target="_blank"><i class="fab fa-whatsapp"></i> WhatsApp</a></li>
          <li><a href="https://instagram.com" target="_blank"><i class="fab fa-instagram"></i> Instagram</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-copy">
      &copy; 2025 Alawusa Heritage Fish & Farms. All rights reserved.
    </div>
  </div>
</footer>


  <script>
    /* -------------------------
       Sidebar toggle + overlay
       ------------------------- */
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('overlay');
    const menuToggle = document.getElementById('menuToggle');

    function openSidebar() {
      sidebar.classList.add('open');
      overlay.classList.add('show');
      menuToggle.setAttribute('aria-expanded', 'true');
      sidebar.setAttribute('aria-hidden', 'false');
      overlay.setAttribute('aria-hidden', 'false');
      // trap focus could be added here for a11y
    }
    function closeSidebar() {
      sidebar.classList.remove('open');
      overlay.classList.remove('show');
      menuToggle.setAttribute('aria-expanded', 'false');
      sidebar.setAttribute('aria-hidden', 'true');
      overlay.setAttribute('aria-hidden', 'true');
    }
    function toggleSidebar() {
      if (sidebar.classList.contains('open')) closeSidebar(); else openSidebar();
    }

    menuToggle.addEventListener('click', toggleSidebar);
    overlay.addEventListener('click', closeSidebar);
    // close with Escape key
    document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeSidebar(); });

    /* -------------------------
       Cart count (localStorage persistence)
       ------------------------- */
    const CART_KEY = 'alawusa_cart_count';
    const cartCountEl = document.getElementById('cart-count');

    function getCartCount() {
      const raw = localStorage.getItem(CART_KEY);
      return raw ? parseInt(raw, 10) || 0 : 0;
    }
    function setCartCount(n) {
      localStorage.setItem(CART_KEY, String(n));
      cartCountEl.textContent = n;
      // optionally hide when zero:
      cartCountEl.style.display = n > 0 ? 'inline-block' : 'none';
    }

    // wire the demo add-to-cart button (for testing)
    document.getElementById('addCartBtn').addEventListener('click', () => {
      const current = getCartCount();
      setCartCount(current + 1);
    });

    // initialize
    (function init() {
      const initial = getCartCount();
      setCartCount(initial);
      // demo names — set both greeting and main area
      const name = localStorage.getItem('alawusa_user_name') || 'Customer';
      document.getElementById('userGreeting').textContent = name;
      document.getElementById('userNameMain').textContent = name;
    })();

    /* -------------------------
       Simple search behaviour (optional)
       ------------------------- */
    document.getElementById('searchBtn').addEventListener('click', () => {
      const q = document.getElementById('searchInput').value.trim();
      if (!q) { document.getElementById('searchInput').focus(); return; }
      // for demo we just alert — replace with your search route
      window.location.href = `search.html?q=${encodeURIComponent(q)}`;
    });


    
  </script>

  <script>
    // Desktop search
document.getElementById('searchBtn').addEventListener('click', () => {
  const q = document.getElementById('searchInput').value.trim();
  if (!q) return;
  window.location.href = `userproducts.html?q=${encodeURIComponent(q)}`;
});

// Mobile search overlay toggle
const mobileOverlay = document.getElementById('mobileSearchOverlay');
const mobileIcon = document.getElementById('mobileSearchIcon');
const closeBtn = document.getElementById('closeMobileSearch');

mobileIcon.addEventListener('click', () => {
  mobileOverlay.style.display = 'flex';
});

closeBtn.addEventListener('click', () => {
  mobileOverlay.style.display = 'none';
});

// Mobile search
document.getElementById('mobileSearchBtn').addEventListener('click', () => {
  const q = document.getElementById('mobileSearchInput').value.trim();
  if (!q) return;
  window.location.href = `userproducts.html?q=${encodeURIComponent(q)}`;
});


  </script>

  

  <script type="module">
  // Import Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import { getFirestore, doc, getDoc, setDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  // Your Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyDuxTHLfwiETTMO6Dx7YMehngZqWLgUlH0",
    authDomain: "alawusa-heritage-website.firebaseapp.com",
    projectId: "alawusa-heritage-website",
    storageBucket: "alawusa-heritage-website.firebasestorage.app",
    messagingSenderId: "857988164081",
    appId: "1:857988164081:web:ccac1200d344a8bd82bc50",
    measurementId: "G-TJQJMVVMZG"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // Elements
  const phoneInput = document.getElementById("phoneInput");
  const savePhoneBtn = document.getElementById("savePhoneBtn");
  const currentPhone = document.getElementById("currentPhone");

  const addressInput = document.getElementById("addressInput");
  const saveAddressBtn = document.getElementById("saveAddressBtn");
  const currentAddress = document.getElementById("currentAddress");

  // Listen for logged-in user
  onAuthStateChanged(auth, async (user) => {
    if (user) {
      const userRef = doc(db, "users", user.uid);
      const snap = await getDoc(userRef);

      if (snap.exists()) {
        const data = snap.data();
        if (data.phone) currentPhone.textContent = data.phone;
        if (data.address) currentAddress.textContent = data.address;
      }

      // Save phone
      savePhoneBtn.addEventListener("click", async () => {
        const newPhone = phoneInput.value.trim();
        if (!newPhone) return alert("Enter phone number");
        await setDoc(userRef, { phone: newPhone }, { merge: true });
        currentPhone.textContent = newPhone;
        phoneInput.value = "";
        alert("Phone updated!");
      });

      // Save address
      saveAddressBtn.addEventListener("click", async () => {
        const newAddress = addressInput.value.trim();
        if (!newAddress) return alert("Enter address");
        await setDoc(userRef, { address: newAddress }, { merge: true });
        currentAddress.textContent = newAddress;
        addressInput.value = "";
        alert("Address updated!");
      });

    } else {
      console.log("No user logged in");
    }
  });
</script>

<script>
function updateCartCount() {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  document.getElementById("cartCount").textContent = cart.length;
}
window.onload = updateCartCount;
</script>

</body>
</html>
